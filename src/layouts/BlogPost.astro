---
import type { CollectionEntry } from 'astro:content'
import BaseHead from '../components/BaseHead.astro'
import Header from '../components/Header.astro'
import Footer from '../components/Footer.astro'
import FormattedDate from '../components/FormattedDate.astro'

type Props = CollectionEntry<'blog'>['data']

const { title, description, pubDate, updatedDate, heroImage, author } =
    Astro.props
---

<html lang="en">
    <head>
        <BaseHead title={title} description={description} />
        <style is:global>
            h2 {
                @apply text-3xl mb-4;
            }
        </style>
    </head>

    <body>
        <Header />
        <main class="max-w-5xl m-0 mx-auto">
            <article>
                <div class="w-full">
                    {
                        heroImage && (
                            <img
                                class="block m-0 mx-auto rounded-xl shadow-md w-full max-w-2xl"
                                src={heroImage}
                                alt=""
                            />
                        )
                    }
                </div>
                <div
                    class="w-full max-w-[calc(100% - 2em)] m-auto p-4 text-gray-950"
                >
                    <div class="mb-4 py-4 px-0 text-center text-2xl">
                        <div class="flex justify-center">
                            <div class="mb-2 px-1">
                                Posted
                                <FormattedDate date={pubDate} />
                                {
                                    updatedDate && (
                                        <div class="italic">
                                            Last updated on{' '}
                                            <FormattedDate date={updatedDate} />
                                        </div>
                                    )
                                }
                            </div>
                            <span class="mb-2 px-1">by {author}</span>
                        </div>
                        <h1 class="my-4 text-4xl">{title}</h1>
                        <hr />
                    </div>
                    <slot />
                </div>
            </article>
        </main>
        <Footer />
    </body>
</html>
